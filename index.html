<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Number Guesser</title>
<link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --bg: #0a0c0f;
    --panel: #10141a;
    --border: #1e2730;
    --green: #00ff88;
    --green-dim: #00ff8833;
    --red: #ff3c5a;
    --red-dim: #ff3c5a22;
    --amber: #ffb300;
    --amber-dim: #ffb30022;
    --blue: #3399ff;
    --blue-dim: #3399ff18;
    --muted: #3a4555;
    --text: #c8d8e8;
    --glow-green: 0 0 12px #00ff8866, 0 0 24px #00ff8833;
    --glow-red: 0 0 12px #ff3c5a66, 0 0 24px #ff3c5a33;
    --glow-amber: 0 0 12px #ffb30066;
    --sidebar-w: 260px;
  }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'Share Tech Mono', monospace;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 24px 16px;
    background-image:
      radial-gradient(ellipse at 20% 20%, #00ff8808 0%, transparent 50%),
      radial-gradient(ellipse at 80% 80%, #0055ff08 0%, transparent 50%);
  }

  /* â”€â”€ SIDEBAR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  #sidebar {
    position: fixed;
    top: 0; left: 0; bottom: 0;
    width: var(--sidebar-w);
    background: #0d1117;
    border-right: 1px solid var(--border);
    z-index: 100;
    transform: translateX(-100%);
    transition: transform 0.35s cubic-bezier(0.4,0,0.2,1);
    display: flex;
    flex-direction: column;
    padding: 24px 0;
  }
  #sidebar.open { transform: translateX(0); }

  .sidebar-header {
    padding: 0 20px 20px;
    border-bottom: 1px solid var(--border);
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  .sidebar-logo {
    font-family: 'Orbitron', sans-serif;
    font-size: 0.8rem;
    font-weight: 700;
    letter-spacing: 0.15em;
    color: var(--green);
    text-shadow: var(--glow-green);
    text-transform: uppercase;
  }
  .close-btn {
    background: none;
    border: none;
    color: var(--muted);
    cursor: pointer;
    font-size: 1.2rem;
    padding: 4px;
    line-height: 1;
    transition: color 0.2s;
  }
  .close-btn:hover { color: var(--text); }

  .sidebar-section-label {
    font-size: 0.6rem;
    letter-spacing: 0.2em;
    color: var(--muted);
    text-transform: uppercase;
    padding: 20px 20px 8px;
  }

  .sidebar-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 12px 20px;
    cursor: pointer;
    border: none;
    background: none;
    width: 100%;
    text-align: left;
    color: var(--text);
    font-family: 'Share Tech Mono', monospace;
    font-size: 0.85rem;
    letter-spacing: 0.05em;
    transition: background 0.15s, color 0.15s;
    border-left: 2px solid transparent;
  }
  .sidebar-item:hover { background: #ffffff08; }
  .sidebar-item.active {
    color: var(--green);
    border-left-color: var(--green);
    background: var(--green-dim);
  }
  .sidebar-item .item-icon  { font-size: 1rem; width: 20px; text-align: center; }
  .sidebar-item .item-label { flex: 1; }
  .sidebar-item .item-badge {
    font-size: 0.6rem;
    padding: 2px 6px;
    border-radius: 2px;
    background: var(--green-dim);
    color: var(--green);
    border: 1px solid var(--green);
    letter-spacing: 0.1em;
    text-transform: uppercase;
  }

  .sidebar-divider { height: 1px; background: var(--border); margin: 12px 20px; }

  /* Overlay */
  #overlay {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.5);
    z-index: 99;
    backdrop-filter: blur(2px);
    opacity: 0;
    transition: opacity 0.3s;
  }
  #overlay.show { display: block; opacity: 1; }

  /* â”€â”€ HAMBURGER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  #hamburger {
    position: fixed;
    top: 16px; left: 16px;
    z-index: 98;
    background: var(--panel);
    border: 1px solid var(--border);
    border-radius: 3px;
    width: 40px; height: 40px;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 5px;
    cursor: pointer;
    transition: border-color 0.2s, box-shadow 0.2s;
  }
  #hamburger:hover { border-color: var(--green); box-shadow: var(--glow-green); }
  #hamburger span {
    display: block;
    width: 18px; height: 2px;
    background: var(--text);
    border-radius: 2px;
    transition: background 0.2s;
  }
  #hamburger:hover span { background: var(--green); }

  /* â”€â”€ MODE CHIP â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .mode-chip {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 3px 10px;
    border-radius: 2px;
    font-size: 0.65rem;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    margin-bottom: 6px;
  }
  .mode-chip.daily    { background: var(--green-dim); color: var(--green); border: 1px solid var(--green); }
  .mode-chip.freeplay { background: var(--amber-dim); color: var(--amber); border: 1px solid var(--amber); }

  /* â”€â”€ HEADER â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  header { text-align: center; margin-bottom: 32px; }
  .title {
    font-family: 'Orbitron', sans-serif;
    font-weight: 900;
    font-size: clamp(1.8rem, 5vw, 2.8rem);
    letter-spacing: 0.12em;
    color: var(--green);
    text-shadow: var(--glow-green);
    text-transform: uppercase;
  }
  .subtitle { font-size: 0.75rem; color: var(--muted); letter-spacing: 0.2em; margin-top: 6px; text-transform: uppercase; }
  .date-badge {
    display: inline-block;
    margin-top: 10px;
    padding: 4px 14px;
    border: 1px solid var(--border);
    border-radius: 2px;
    font-size: 0.7rem;
    color: var(--muted);
    letter-spacing: 0.15em;
  }

  /* â”€â”€ CARD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .card {
    width: 100%;
    max-width: 440px;
    background: var(--panel);
    border: 1px solid var(--border);
    border-radius: 4px;
    padding: 28px 24px;
    position: relative;
    overflow: hidden;
  }
  .card::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 2px;
    background: linear-gradient(90deg, transparent, var(--green), transparent);
    opacity: 0.6;
    transition: background 0.4s;
  }
  .card.freeplay::before {
    background: linear-gradient(90deg, transparent, var(--amber), transparent);
  }

  /* â”€â”€ GUESSES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .guesses-label { font-size: 0.65rem; letter-spacing: 0.2em; color: var(--muted); text-transform: uppercase; margin-bottom: 12px; }
  .guesses-list  { display: flex; flex-direction: column; gap: 8px; margin-bottom: 28px; }
  .guess-row {
    display: flex; align-items: center; gap: 12px;
    padding: 10px 14px;
    border: 1px solid var(--border);
    border-radius: 2px;
    min-height: 46px;
    background: var(--bg);
    transition: border-color 0.3s, background 0.3s;
    animation: slideIn 0.35s ease both;
  }
  @keyframes slideIn {
    from { opacity: 0; transform: translateY(-8px); }
    to   { opacity: 1; transform: translateY(0); }
  }
  .guess-row.empty   { opacity: 0.25; }
  .guess-row.correct { border-color: var(--green); background: var(--green-dim); }
  .guess-row.high    { border-color: var(--red);   background: var(--red-dim); }
  .guess-row.low     { border-color: var(--blue);  background: var(--blue-dim); }

  .guess-number {
    font-family: 'Orbitron', sans-serif; font-weight: 700; font-size: 1.3rem; min-width: 48px;
    color: var(--text);
  }
  .guess-row.correct .guess-number { color: var(--green); text-shadow: var(--glow-green); }
  .guess-row.high    .guess-number { color: var(--red);   text-shadow: var(--glow-red); }
  .guess-row.low     .guess-number { color: var(--blue);  text-shadow: 0 0 12px #3399ff66; }

  .guess-hint { font-size: 0.72rem; letter-spacing: 0.12em; text-transform: uppercase; display: flex; align-items: center; gap: 6px; }
  .guess-row.correct .guess-hint { color: var(--green); }
  .guess-row.high    .guess-hint { color: var(--red); }
  .guess-row.low     .guess-hint { color: var(--blue); }
  .guess-row.empty   .guess-hint { color: var(--muted); font-style: italic; }

  /* â”€â”€ SLOTS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .slots { display: flex; gap: 6px; justify-content: flex-end; margin-bottom: 20px; }
  .slot-dot {
    width: 8px; height: 8px; border-radius: 50%;
    background: var(--border);
    transition: background 0.3s, box-shadow 0.3s;
  }
  .slot-dot.used   { background: var(--muted); }
  .slot-dot.active { background: var(--green); box-shadow: var(--glow-green); }
  .slot-dot.won    { background: var(--green); box-shadow: var(--glow-green); }
  .slot-dot.lost   { background: var(--red);   box-shadow: var(--glow-red); }

  /* â”€â”€ INPUT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .input-area { display: flex; gap: 10px; }
  input[type="number"] {
    flex: 1;
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: 2px;
    padding: 12px 16px;
    font-family: 'Orbitron', sans-serif;
    font-size: 1.1rem; font-weight: 700;
    color: var(--text);
    outline: none;
    transition: border-color 0.2s, box-shadow 0.2s;
    -moz-appearance: textfield;
    text-align: center;
  }
  input[type="number"]::-webkit-inner-spin-button,
  input[type="number"]::-webkit-outer-spin-button { -webkit-appearance: none; }
  input[type="number"]:focus {
    border-color: var(--green);
    box-shadow: 0 0 0 1px var(--green), var(--glow-green);
  }
  .card.freeplay input[type="number"]:focus {
    border-color: var(--amber);
    box-shadow: 0 0 0 1px var(--amber), var(--glow-amber);
  }
  input::placeholder { color: var(--muted); }

  button {
    background: transparent;
    border: 1px solid var(--green);
    color: var(--green);
    padding: 12px 20px;
    font-family: 'Orbitron', sans-serif;
    font-size: 0.75rem; font-weight: 700;
    letter-spacing: 0.1em; text-transform: uppercase;
    cursor: pointer; border-radius: 2px;
    transition: background 0.2s, box-shadow 0.2s, transform 0.1s;
  }
  button:hover:not(:disabled)  { background: var(--green-dim); box-shadow: var(--glow-green); }
  button:active:not(:disabled) { transform: scale(0.97); }
  button:disabled { opacity: 0.3; cursor: not-allowed; }

  .error-msg {
    font-size: 0.7rem; color: var(--amber); letter-spacing: 0.1em;
    margin-top: 8px; min-height: 18px; text-align: center;
  }

  /* â”€â”€ RESULT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  .result-banner {
    display: none; flex-direction: column; align-items: center;
    text-align: center; padding: 24px 0 8px; gap: 8px;
    animation: fadeUp 0.5s ease both;
  }
  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(12px); }
    to   { opacity: 1; transform: translateY(0); }
  }
  .result-banner.show { display: flex; }
  .result-title {
    font-family: 'Orbitron', sans-serif; font-weight: 900;
    font-size: 1.4rem; letter-spacing: 0.15em; text-transform: uppercase;
  }
  .result-title.win  { color: var(--green); text-shadow: var(--glow-green); }
  .result-title.lose { color: var(--red);   text-shadow: var(--glow-red); }
  .result-sub    { font-size: 0.75rem; color: var(--muted); letter-spacing: 0.1em; }
  .result-answer {
    font-family: 'Orbitron', sans-serif; font-weight: 900;
    font-size: 2.5rem; color: var(--green); text-shadow: var(--glow-green); line-height: 1;
  }
  .result-answer.lose { color: var(--red); text-shadow: var(--glow-red); }

  .action-row { display: flex; gap: 10px; margin-top: 6px; flex-wrap: wrap; justify-content: center; }
  .share-btn      { border-color: var(--amber); color: var(--amber); }
  .share-btn:hover:not(:disabled) { background: var(--amber-dim); box-shadow: var(--glow-amber); }
  .play-again-btn { border-color: var(--green); color: var(--green); }

  .next-label { font-size: 0.65rem; color: var(--muted); letter-spacing: 0.15em; text-transform: uppercase; margin-top: 4px; }
  .countdown  { font-family: 'Orbitron', sans-serif; font-size: 1rem; color: var(--text); letter-spacing: 0.1em; }

  .round-counter {
    font-size: 0.65rem; color: var(--amber); letter-spacing: 0.15em;
    text-transform: uppercase; text-align: right; margin-bottom: 8px;
  }

  @keyframes flicker {
    0%,100% { opacity: 1; }
    50%      { opacity: 0.7; }
  }
  .celebrate { animation: flicker 0.15s ease 3; }
</style>
</head>
<body>

<!-- Hamburger -->
<button id="hamburger" aria-label="Open menu">
  <span></span><span></span><span></span>
</button>

<!-- Overlay -->
<div id="overlay"></div>

<!-- Sidebar -->
<div id="sidebar">
  <div class="sidebar-header">
    <div class="sidebar-logo">Number Guesser</div>
    <button class="close-btn" id="closeBtn">âœ•</button>
  </div>

  <div class="sidebar-section-label">Modes</div>

  <button class="sidebar-item active" id="navDaily" onclick="switchMode('daily')">
    <span class="item-icon">ðŸ“…</span>
    <span class="item-label">Daily</span>
    <span class="item-badge">Live</span>
  </button>

  <button class="sidebar-item" id="navFree" onclick="switchMode('freeplay')">
    <span class="item-icon">ðŸŽ®</span>
    <span class="item-label">Free Play</span>
  </button>

  <div class="sidebar-divider"></div>
  <div class="sidebar-section-label">How to Play</div>

  <div style="padding: 0 20px; font-size: 0.72rem; color: var(--muted); line-height: 1.8; letter-spacing: 0.03em;">
    Guess the secret number between <b style="color:var(--text)">1 and 100</b>.<br>
    You have <b style="color:var(--text)">5 guesses</b>.<br>
    Each guess tells you if the answer is higher or lower.<br><br>
    <span style="color:var(--green)">ðŸ“… Daily</span> â€” one number per day, same for everyone.<br><br>
    <span style="color:var(--amber)">ðŸŽ® Free Play</span> â€” a fresh random number each round, play as many times as you like.
  </div>

  <div style="margin-top: auto; padding: 20px; border-top: 1px solid var(--border);">
    <div style="font-size: 0.62rem; color: var(--muted); letter-spacing: 0.12em; line-height: 1.9; text-transform: uppercase;">
      Last Updated 2/20/2026<br>
      Author
    </div>
  </div>
</div>

<!-- Main content -->
<header>
  <div id="modeChip" class="mode-chip daily">ðŸ“… Daily</div>
  <div class="title">Number Guesser</div>
  <div class="subtitle" id="headerSub">A new number every day</div>
  <div class="date-badge" id="dateBadge"></div>
</header>

<div class="card" id="mainCard">
  <div id="roundCounter" class="round-counter" style="display:none"></div>
  <div class="guesses-label">Guess History</div>
  <div class="guesses-list" id="guessList"></div>
  <div class="slots" id="slots"></div>

  <div class="input-area">
    <input type="number" id="guessInput" min="1" max="100" placeholder="1 â€“ 100" autocomplete="off">
    <button id="guessBtn">Guess</button>
  </div>
  <div class="error-msg" id="errorMsg"></div>

  <div class="result-banner" id="resultBanner">
    <div class="result-title"  id="resultTitle"></div>
    <div class="result-sub"    id="resultSub"></div>
    <div class="result-answer" id="resultAnswer"></div>
    <div class="action-row">
      <button class="share-btn"      id="shareBtn">Share Result</button>
      <button class="play-again-btn" id="playAgainBtn" style="display:none" onclick="startFreeRound()">Play Again</button>
    </div>
    <div class="next-label" id="nextLabel" style="display:none">Next number in</div>
    <div class="countdown"  id="countdown" style="display:none"></div>
  </div>
</div>

<script>
  // â”€â”€ Helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function todayKey() {
    const d = new Date();
    return `${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}-${String(d.getDate()).padStart(2,'0')}`;
  }
  function dailyNumber(dateStr) {
    let h = 2166136261;
    for (let i = 0; i < dateStr.length; i++) { h ^= dateStr.charCodeAt(i); h = (h * 16777619) >>> 0; }
    return (h % 100) + 1;
  }
  function formatDate(dateStr) {
    const [y,m,d] = dateStr.split('-');
    const months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];
    return `${months[+m-1]} ${+d}, ${y}`;
  }
  function randInt(min, max) { return Math.floor(Math.random() * (max - min + 1)) + min; }

  // â”€â”€ Constants â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const MAX_GUESSES = 5;
  const dateStr  = todayKey();
  const STORE_KEY = `ng-${dateStr}`;

  // â”€â”€ State â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  let mode = 'daily';
  let dailyState = { guesses: [], done: false, won: false };
  let freeState  = { target: randInt(1,100), guesses: [], done: false, won: false, round: 1 };

  // Load saved daily state
  (async () => {
    try {
      const r = await window.storage.get(STORE_KEY);
      if (r) dailyState = JSON.parse(r.value);
    } catch(e) {}
    document.getElementById('dateBadge').textContent = formatDate(dateStr);
    render();
    if (dailyState.done) showResult();
    startCountdown();
  })();

  async function saveDailyState() {
    try { await window.storage.set(STORE_KEY, JSON.stringify(dailyState)); } catch(e) {}
  }

  function currentState()  { return mode === 'daily' ? dailyState : freeState; }
  function currentTarget() { return mode === 'daily' ? dailyNumber(dateStr) : freeState.target; }

  // â”€â”€ Sidebar â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  const sidebar   = document.getElementById('sidebar');
  const overlay   = document.getElementById('overlay');

  document.getElementById('hamburger').addEventListener('click', () => {
    sidebar.classList.add('open'); overlay.classList.add('show');
  });
  function closeSidebar() { sidebar.classList.remove('open'); overlay.classList.remove('show'); }
  document.getElementById('closeBtn').addEventListener('click', closeSidebar);
  overlay.addEventListener('click', closeSidebar);

  // â”€â”€ Mode Switch â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function switchMode(m) {
    mode = m;
    closeSidebar();

    document.getElementById('navDaily').classList.toggle('active', m === 'daily');
    document.getElementById('navFree').classList.toggle('active', m === 'freeplay');

    const chip      = document.getElementById('modeChip');
    const headerSub = document.getElementById('headerSub');
    const dateBadge = document.getElementById('dateBadge');
    const card      = document.getElementById('mainCard');
    const roundCtr  = document.getElementById('roundCounter');
    const banner    = document.getElementById('resultBanner');

    // Hide result banner when switching modes
    banner.classList.remove('show');
    document.getElementById('errorMsg').textContent = '';

    if (m === 'daily') {
      chip.className = 'mode-chip daily';
      chip.textContent = 'ðŸ“… Daily';
      headerSub.textContent = 'A new number every day';
      dateBadge.style.display = '';
      card.classList.remove('freeplay');
      roundCtr.style.display = 'none';
    } else {
      chip.className = 'mode-chip freeplay';
      chip.textContent = 'ðŸŽ® Free Play';
      headerSub.textContent = 'A new number every round';
      dateBadge.style.display = 'none';
      card.classList.add('freeplay');
      roundCtr.style.display = '';
    }

    render();
    if (currentState().done) showResult();
  }

  // â”€â”€ Free Play reset â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function startFreeRound() {
    freeState = {
      target: randInt(1, 100),
      guesses: [],
      done: false,
      won: false,
      round: freeState.round + 1
    };
    document.getElementById('resultBanner').classList.remove('show');
    document.getElementById('errorMsg').textContent = '';
    render();
  }

  // â”€â”€ Render â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function render() {
    const state     = currentState();
    const guessList = document.getElementById('guessList');
    const slots     = document.getElementById('slots');
    const roundCtr  = document.getElementById('roundCounter');

    if (mode === 'freeplay') roundCtr.textContent = `Round ${freeState.round}`;

    guessList.innerHTML = '';
    slots.innerHTML = '';

    for (let i = 0; i < MAX_GUESSES; i++) {
      const row = document.createElement('div');
      row.className = 'guess-row';

      if (i < state.guesses.length) {
        const g   = state.guesses[i];
        const tgt = currentTarget();
        const cls = g === tgt ? 'correct' : g > tgt ? 'high' : 'low';
        row.classList.add(cls);
        row.style.animationDelay = `${i * 0.05}s`;

        const numEl = document.createElement('div');
        numEl.className = 'guess-number';
        numEl.textContent = g;

        const hintEl = document.createElement('div');
        hintEl.className = 'guess-hint';
        if (cls === 'correct') hintEl.innerHTML = '<span>âœ“</span> Correct!';
        else if (cls === 'high') hintEl.innerHTML = '<span>â†“</span> Too High';
        else hintEl.innerHTML = '<span>â†‘</span> Too Low';

        row.appendChild(numEl);
        row.appendChild(hintEl);
      } else {
        row.classList.add('empty');
        const hintEl = document.createElement('div');
        hintEl.className = 'guess-hint';
        hintEl.textContent = `Guess ${i + 1}`;
        row.appendChild(hintEl);
      }
      guessList.appendChild(row);
    }

    for (let i = 0; i < MAX_GUESSES; i++) {
      const dot = document.createElement('div');
      dot.className = 'slot-dot';
      if (state.done) {
        if (i < state.guesses.length) dot.classList.add(state.won ? 'won' : 'lost');
      } else {
        if (i < state.guesses.length) dot.classList.add('used');
        else if (i === state.guesses.length) dot.classList.add('active');
      }
      slots.appendChild(dot);
    }

    const disabled = state.done;
    document.getElementById('guessInput').disabled = disabled;
    document.getElementById('guessBtn').disabled   = disabled;
  }

  // â”€â”€ Guess logic â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function submitGuess() {
    const errorMsg = document.getElementById('errorMsg');
    errorMsg.textContent = '';
    const val = parseInt(document.getElementById('guessInput').value, 10);
    if (isNaN(val) || val < 1 || val > 100) {
      errorMsg.textContent = 'âš  Enter a number between 1 and 100';
      return;
    }
    const state = currentState();
    if (state.guesses.includes(val)) {
      errorMsg.textContent = 'âš  You already guessed that number!';
      return;
    }

    state.guesses.push(val);
    document.getElementById('guessInput').value = '';

    const tgt = currentTarget();
    if (val === tgt)                               { state.done = true; state.won = true; }
    else if (state.guesses.length >= MAX_GUESSES) { state.done = true; state.won = false; }

    render();
    if (mode === 'daily') saveDailyState();
    if (state.done) setTimeout(showResult, 400);
  }

  document.getElementById('guessBtn').addEventListener('click', submitGuess);
  document.getElementById('guessInput').addEventListener('keydown', e => { if (e.key === 'Enter') submitGuess(); });

  // â”€â”€ Result â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function showResult() {
    const state  = currentState();
    const banner = document.getElementById('resultBanner');
    banner.classList.add('show');

    const title       = document.getElementById('resultTitle');
    const sub         = document.getElementById('resultSub');
    const ans         = document.getElementById('resultAnswer');
    const nextLabel   = document.getElementById('nextLabel');
    const ctdn        = document.getElementById('countdown');
    const shareBtn    = document.getElementById('shareBtn');
    const playAgainBtn= document.getElementById('playAgainBtn');

    if (state.won) {
      title.textContent = 'Cracked it!';
      title.className   = 'result-title win';
      sub.textContent   = `You got it in ${state.guesses.length} of ${MAX_GUESSES} guess${state.guesses.length === 1 ? '' : 'es'}`;
      ans.textContent   = currentTarget();
      ans.className     = 'result-answer celebrate';
    } else {
      title.textContent = 'Game Over';
      title.className   = 'result-title lose';
      sub.textContent   = 'The number was:';
      ans.textContent   = currentTarget();
      ans.className     = 'result-answer lose';
    }

    const isDaily = mode === 'daily';
    shareBtn.style.display     = isDaily  ? '' : 'none';
    playAgainBtn.style.display = !isDaily ? '' : 'none';
    nextLabel.style.display    = isDaily  ? '' : 'none';
    ctdn.style.display         = isDaily  ? '' : 'none';
  }

  // â”€â”€ Share â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  document.getElementById('shareBtn').addEventListener('click', () => {
    const tgt = dailyNumber(dateStr);
    const squares = dailyState.guesses.map(g => g === tgt ? 'ðŸŸ©' : g > tgt ? 'ðŸ”´' : 'ðŸ”µ').join('');
    const text =
      `Number Guesser â€” ${formatDate(dateStr)}\n` +
      `${dailyState.won ? `Solved in ${dailyState.guesses.length}/${MAX_GUESSES}` : `X/${MAX_GUESSES}`}\n\n` +
      squares;
    navigator.clipboard.writeText(text)
      .then(() => {
        const btn = document.getElementById('shareBtn');
        btn.textContent = 'Copied!';
        setTimeout(() => { btn.textContent = 'Share Result'; }, 2000);
      })
      .catch(() => alert(text));
  });

  // â”€â”€ Countdown â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  function startCountdown() {
    function tick() {
      const now  = new Date();
      const next = new Date(now);
      next.setDate(next.getDate() + 1);
      next.setHours(0, 0, 0, 0);
      const diff = next - now;
      const h = String(Math.floor(diff / 3600000)).padStart(2,'0');
      const m = String(Math.floor((diff % 3600000) / 60000)).padStart(2,'0');
      const s = String(Math.floor((diff % 60000) / 1000)).padStart(2,'0');
      document.getElementById('countdown').textContent = `${h}:${m}:${s}`;
    }
    tick();
    setInterval(tick, 1000);
  }
</script>
</body>
</html>
